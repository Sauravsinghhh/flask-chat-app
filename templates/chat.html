<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - {{ current_user }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed={{ current_user }}" alt="My Avatar"
                        class="user-avatar">
                    <div class="user-info">
                        <h4>{{ current_user }}</h4>
                        <span class="user-status"><span class="status-dot"></span>Online</span>
                    </div>
                </div>
                <a href="/logout" class="logout-link">Logout</a>
            </div>

            <div class="user-list" id="userList">
                <!-- User items will be populated by JS -->
                <div style="text-align:center; padding: 20px; color: #94a3b8;">Loading users...</div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <main class="chat-area">
            <div class="chat-header">
                <h3 id="chatPartnerName">Select a user to chat</h3>
                <span id="chatPartnerStatus" class="user-status" style="display:none;"></span>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state">
                <img src="https://cdni.iconscout.com/illustration/premium/thumb/empty-state-2130362-1800926.png"
                    alt="No Chat Selected" style="width: 200px; opacity: 0.5;">
                <p>Select a contact to start messaging</p>
            </div>

            <!-- Messages List -->
            <div id="messagesContainer" class="messages-container hidden">
                <!-- Messages will be injected here -->
            </div>

            <!-- Input Area -->
            <div id="chatInputArea" class="chat-input-area">
                <input type="text" id="messageInput" class="chat-input" placeholder="Type a message..."
                    autocomplete="off">
                <button id="sendBtn" class="send-btn">Send</button>
            </div>
        </main>
    </div>

    <!-- Store current user in a global variable for JS -->
    <script>
        const CURRENT_USER = "{{ current_user }}";
    </script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>